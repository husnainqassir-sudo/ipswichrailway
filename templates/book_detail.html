{% extends 'navigation2.html' %}
{% block b %}

<h2>Available Trains</h2>

{% for train in trains %}
<div style="border:1px solid #ccc; padding:15px; margin-bottom:20px;">

    <img src="{{ train.img.url }}" width="120"><br>

    <strong>{{ train.trainname }}</strong> ({{ train.train_no }})<br>
    From: {{ train.from_city }} → {{ train.to_city }}<br>

    <!-- ✅ ADD PASSENGER FORM -->
    <form method="post">
        {% csrf_token %}

        <input type="hidden" name="train_id" value="{{ train.id }}">

        <input type="text" name="name" placeholder="Passenger Name" required>
        <input type="number" name="age" placeholder="Age" required>

        <select name="gender" required>
            <option value="">Select Gender</option>
            <option>Male</option>
            <option>Female</option>
        </select>

        <select name="route_id" required>
            <option value="">Select Route</option>
            {% for r in train.add_route_set.all %}
                <option value="{{ r.id }}">
                    {{ r.route }} — ₹{{ r.fare }}
                </option>
            {% endfor %}
        </select>

        <button type="submit">Add Passenger</button>
    </form>

</div>
{% empty %}
<p>No trains available</p>
{% endfor %}

{% endblock %}