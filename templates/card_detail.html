{% extends 'navigation2.html' %}
{% load static %}

{% block b %}
<div style="color:black; background:white; border-radius:8px; padding:50px;">
    <h3><strong>Train Detail</strong></h3><hr>
    <table width="800">
        <tr>
            <td><img src="{{ train.img.url }}" style="width:100px;height:70px"></td>
            <td>
                <b>Train Name: {{ train.trainname }}</b><br>
                Train Number: {{ train.train_no }}<br>
                From City: {{ train.from_city }}<br>
                To City: {{ train.to_city }}<br>
                Fare: {{ train.fare }}<br>
            </td>
        </tr>
    </table>
    <hr>

    <h3><strong>Enter Passenger Details</strong></h3><hr>
    <form method="post">
        {% csrf_token %}
        <input type="text" name="name" placeholder="Passenger Name" required style="width:300px;height:35px;border-radius:8px;margin-right:20px;">
        <input type="number" name="age" placeholder="Passenger Age" required style="width:150px;height:35px;border-radius:8px;margin-right:20px;">
        <select name="gender" style="width:150px;height:35px;border-radius:8px;">
            <option>Male</option>
            <option>Female</option>
        </select>
        <input type="submit" value="Add" style="margin-left:20px;background:#333;color:white;padding:8px 16px;border-radius:8px;">
    </form>

    <hr><h3><strong>All Added Passengers</strong></h3><hr>

    <table class="table table-bordered">
        <thead style="background:#333;color:white;">
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Fare</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for t in tickets %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ t.name }}</td>
                <td>{{ t.age }}</td>
                <td>{{ t.gender }}</td>
                <td>{{ t.fare }}</td>
                <td>
                    <a href="{% url 'delete_passenger' t.id user_instance.id train.id %}" style="color:red;">Delete</a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6">No passengers added yet.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="background:#333;color:white;border-radius:8px;padding:10px;margin-top:20px;text-align:right;">
        <strong>Total = {{ total }}</strong>
        <a href="{% url 'card_detail' total user_instance.id train.id %}" style="background:green;color:white;padding:8px 16px;border-radius:6px;margin-left:20px;text-decoration:none;">Book Now</a>
    </div>
</div>
{% endblock %}